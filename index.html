<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="A romantic interactive experience for Mohit and Thara">
  <title>Prove you are not a robot 🤖💜</title>
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --main-bg: linear-gradient(135deg, #a084e8 0%, #e7bcde 100%);
      --frost-bg: rgba(255,255,255,0.20);
      --frost-border: rgba(255,255,255,0.35);
      --glass-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.17);
      --accent: #e8b3ff;
      --accent-dark: #b488e8;
      --text-glow: 0 0 6px #fff, 0 0 18px #e8b3ff;
      --button-glow: 0 0 15px #e8b3ff, 0 0 40px #b488e8;
      --success: #43a047;
      --error: #e53935;
    }
    
    * {
      box-sizing: border-box;
    }
    
    body {
      margin: 0;
      padding: 0;
      min-height: 100vh;
      font-family: 'Baloo 2', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: var(--main-bg);
      position: relative;
      overflow-x: hidden;
      transition: background 1s;
      line-height: 1.6;
    }
    
    /* Aurora Effect */
    .aurora {
      position: absolute;
      left: 50%;
      top: 0;
      width: 110vw;
      height: 110px;
      transform: translateX(-50%);
      z-index: 10;
      pointer-events: none;
      overflow: hidden;
    }
    
    .aurora-gradient {
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, #96fbc4 0%, #f9f586 16%, #fbc2eb 32%, #a084e8 60%, #fbc2eb 80%, #96fbc4 100%);
      opacity: 0.5;
      filter: blur(20px);
      animation: aurora-move 7s linear infinite alternate;
      will-change: transform;
    }
    
    @keyframes aurora-move {
      0% {transform: translateX(0);}
      100% {transform: translateX(-20vw);}
    }
    
    .frosted {
      background: var(--frost-bg);
      border: 2.5px solid var(--frost-border);
      box-shadow: var(--glass-shadow);
      backdrop-filter: blur(22px);
      border-radius: 32px;
      padding: 44px 32px 36px;
      max-width: 440px;
      margin: 9vh auto 0;
      text-align: center;
      animation: fadeInUp 1.5s cubic-bezier(0.33,1,0.68,1) both;
      position: relative;
      z-index: 20;
    }
    
    @keyframes fadeInUp {
      0% { opacity: 0; transform: translateY(60px);}
      100% { opacity: 1; transform: translateY(0);}
    }
    
    .main-question {
      font-size: clamp(1.8rem, 5vw, 2.1rem);
      font-weight: 700;
      color: #15111a;
      letter-spacing: 1.5px;
      text-shadow: 0 2px 12px rgba(255,255,255,0.5), 0 1px 0 rgba(255,255,255,0.8);
      margin: 22px 0 20px;
      line-height: 1.2;
    }
    
    .dreamy-label {
      color: #15111a;
      font-size: clamp(1rem, 4vw, 1.23rem);
      letter-spacing: 1px;
      margin-bottom: 12px;
      font-weight: bold;
      text-shadow: 0 0 5px rgba(255,255,255,0.7), 0 0 20px rgba(216,182,255,0.77);
    }
    
    input[type="text"] {
      padding: 13px 16px;
      font-size: 1.1em;
      border-radius: 12px;
      border: 1.5px solid #d8b6ff;
      width: 80%;
      margin-bottom: 10px;
      outline: none;
      background: rgba(255,255,255,0.4);
      box-shadow: 0 1px 8px rgba(232,179,255,0.44);
      transition: border 0.2s, background 0.2s;
    }
    
    input[type="text"]:focus {
      border: 2px solid #e8b3ff;
      background: rgba(255,255,255,0.8);
    }
    
    button {
      padding: 14px 42px;
      border-radius: 18px;
      background: var(--accent);
      border: none;
      color: #fff;
      font-size: 1.22em;
      letter-spacing: 2px;
      margin-top: 8px;
      font-family: 'Baloo 2', cursive, sans-serif;
      font-weight: 600;
      box-shadow: var(--button-glow);
      cursor: pointer;
      transition: all 0.22s;
      text-shadow: 0 0 7px rgba(255,255,255,0.9);
    }
    
    button:hover, button:active {
      background: var(--accent-dark);
      box-shadow: 0 0 35px #e8b3ff, 0 0 70px #b488e8;
      transform: translateY(-2px);
    }
    
    .success { 
      color: var(--success); 
      margin-top: 10px; 
      font-weight: bold; 
    }
    
    .error { 
      color: var(--error); 
      margin-top: 10px; 
      font-weight: bold; 
    }

    /* PAGE 2: Love Story Page Romantic Pastel Layout */
    #page2 {
      min-height: 100vh;
      width: 100vw;
      background: linear-gradient(120deg, #fce4ec 0%, #e1bee7 60%, #cfd8dc 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      padding: 20px;
      margin: 0;
      position: relative;
      overflow: hidden;
    }
    
    .love-story {
      background: rgba(255,255,255,0.92);
      border-radius: 24px;
      padding: 38px 48px 32px;
      font-size: 1.17em;
      color: #6a3574;
      line-height: 1.7;
      margin-bottom: 28px;
      box-shadow: 0 2px 20px rgba(231,188,222,0.66), 0 10px 60px rgba(232,179,255,0.33);
      animation: fadeInUp 1.2s both;
      max-width: 800px;
      min-width: 320px;
      width: 90%;
      margin: 0 auto 28px;
      letter-spacing: 0.3px;
      font-weight: 500;
      white-space: normal;
      overflow-wrap: break-word;
      text-align: center;
      position: relative;
    }
    
    /* Romantic Captions */
    .romantic-caption {
      position: absolute;
      top: 20px;
      right: 20px;
      background: rgba(255, 255, 255, 0.9);
      padding: 15px 25px;
      border-radius: 20px;
      font-size: 1.1em;
      color: #8952a0;
      font-weight: 600;
      box-shadow: 0 4px 15px rgba(232, 179, 255, 0.3);
      opacity: 0;
      transform: translateX(100px);
      animation: slideInRight 1s ease-out forwards;
      z-index: 100;
      max-width: 300px;
      text-align: center;
    }
    
    @keyframes slideInRight {
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }
    
    @keyframes slideOutRight {
      to {
        opacity: 0;
        transform: translateX(100px);
      }
    }
    
    .love-story h2 {
      margin: 0.2em 0 0.5em;
      text-align: center;
      color: #8952a0;
      font-size: clamp(1.8rem, 5vw, 2.1rem);
      text-shadow: 0 2px 16px rgba(232,179,255,0.33);
      font-weight: 700;
    }
    
    .love-story .illustration {
      text-align: center;
      margin-bottom: 12px;
    }
    
    .love-story .illustration img {
      width: 52px;
      margin: 0 10px 8px;
      vertical-align: middle;
      filter: drop-shadow(0 2px 4px rgba(255,255,255,0.8));
      animation: float 3s ease-in-out infinite;
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0);}
      50% { transform: translateY(-13px);}
    }
    
    /* Page 3: Core Memories */
    #page3 {
      min-height: 100vh;
      width: 100vw;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      position: relative;
      overflow: hidden;
      padding: 20px;
    }
    
    .page3-title {
      text-align: center;
      color: white;
      font-size: clamp(1.8rem, 5vw, 2.5rem);
      margin: 0 0 30px;
      text-shadow: 0 2px 10px rgba(0,0,0,0.3);
      padding-top: 20px;
    }
    
    .memory-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 20px;
      padding: 20px;
      max-width: 800px;
      margin: 0 auto;
    }
    
    .draggable-image {
      width: 100%;
      height: 150px;
      object-fit: cover;
      border-radius: 15px;
      cursor: grab;
      box-shadow: 0 8px 25px rgba(0,0,0,0.3);
      transition: transform 0.2s ease;
      border: 3px solid rgba(255,255,255,0.8);
      z-index: 10;
      touch-action: none;
    }
    
    .draggable-image:hover {
      transform: scale(1.05);
      box-shadow: 0 12px 35px rgba(0,0,0,0.4);
    }
    
    .draggable-image.dragging {
      transform: rotate(5deg) scale(1.1);
      z-index: 1000;
      cursor: grabbing;
    }
    
    .nickname-captcha {
      background: linear-gradient(90deg, #fbc2eb 0%, #a6c1ee 100%);
      border-radius: 12px;
      padding: 20px 14px 16px;
      font-size: clamp(1rem, 4vw, 1.2rem);
      color: #6a1b9a;
      font-weight: bold;
      margin: 18px auto 20px;
      box-shadow: 0 4px 18px rgba(232,179,255,0.44);
      border: 2px solid rgba(232,179,255,0.77);
      display: inline-block;
      width: 87%;
      letter-spacing: 1px;
      text-shadow: 0 2px 10px rgba(255,255,255,0.5);
      text-align: center;
    }
    
    /* Smiling Clouds */
    .cloud {
      position: fixed;
      top: 20px;
      width: 80px;
      height: 40px;
      background: #87CEEB;
      border-radius: 40px;
      z-index: 5;
      animation: float-cloud 6s ease-in-out infinite;
      opacity: 0.9;
      will-change: transform;
    }
    
    .cloud:before {
      content: '';
      position: absolute;
      top: -20px;
      left: 15px;
      width: 50px;
      height: 50px;
      background: #87CEEB;
      border-radius: 50%;
    }
    
    .cloud:after {
      content: '';
      position: absolute;
      top: -10px;
      right: 10px;
      width: 35px;
      height: 35px;
      background: #87CEEB;
      border-radius: 50%;
    }
    
    .cloud-face {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 20px;
      z-index: 6;
    }
    
    @keyframes float-cloud {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }
    
    .cloud:nth-child(1) { left: 10%; animation-delay: 0s; }
    .cloud:nth-child(2) { left: 30%; animation-delay: 2s; }
    .cloud:nth-child(3) { left: 60%; animation-delay: 4s; }
    .cloud:nth-child(4) { left: 85%; animation-delay: 1s; }
    
    /* Blue Raindrops */
    .raindrop {
      position: fixed;
      z-index: 10000;
      top: -30px;
      width: 7px; 
      height: 16px;
      pointer-events: none;
      border-radius: 80% 80% 60% 60%;
      background: linear-gradient(160deg, #4A90E2 20%, #1E3A8A 80%);
      opacity: 0.6;
      animation: raindrop-fall 5.5s linear forwards;
      box-shadow: 0 4px 12px rgba(74, 144, 226, 0.4);
      will-change: transform;
    }
    
    @keyframes raindrop-fall {
      0% { opacity: 0; }
      6% { opacity: 0.8;}
      90% { opacity: 0.8;}
      100% { transform: translateY(110vh); opacity: 0;}
    }
    
    /* Audio Controls */
    .audio-controls {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 1000;
      background: rgba(255,255,255,0.8);
      border-radius: 50%;
      width: 50px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      border: none;
      transition: all 0.3s;
    }
    
    .audio-controls:hover {
      transform: scale(1.1);
      background: rgba(255,255,255,0.9);
    }
    
    .audio-controls i {
      font-size: 24px;
      color: #a084e8;
    }
    
    /* Loading Screen */
    .loading-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--main-bg);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      transition: opacity 0.5s ease-out;
    }
    
    .loading-spinner {
      width: 50px;
      height: 50px;
      border: 5px solid rgba(255,255,255,0.3);
      border-radius: 50%;
      border-top-color: #e8b3ff;
      animation: spin 1s ease-in-out infinite;
      margin-bottom: 20px;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    .loading-text {
      color: white;
      font-size: 1.2rem;
      text-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }
    
    /* Responsive Adjustments */
    @media (max-width: 900px) {
      .love-story {
        padding: 28px 20px 22px;
        max-width: 95%;
        font-size: 1.05em;
      }
      
      .romantic-caption {
        position: static;
        margin: 10px auto;
        transform: none;
        opacity: 1;
        animation: none;
      }
      
      .frosted {
        padding: 30px 20px;
        margin-top: 5vh;
        max-width: 90%;
      }
    }
    
    @media (max-width: 600px) {
      #page2, #page3 { 
        padding: 10px; 
      }
      
      .love-story {
        padding: 16px 15px;
        font-size: 1em;
      }
      
      .memory-grid {
        grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
      }
      
      .draggable-image {
        height: 120px;
      }
      
      .nickname-captcha {
        width: 95%;
        padding: 12px 4vw;
      }
      
      input[type="text"] {
        width: 90%;
      }
    }
    
    @media (max-width: 400px) {
      .main-question {
        font-size: 1.6rem;
      }
      
      button {
        padding: 12px 30px;
        font-size: 1.1em;
      }
    }
  </style>
  <!-- Font Awesome for audio control icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
  <!-- Loading Screen -->
  <div class="loading-screen" id="loadingScreen">
    <div class="loading-spinner"></div>
    <div class="loading-text">Loading sweet memories...</div>
  </div>
  
  <!-- Aurora -->
  <div class="aurora"><div class="aurora-gradient"></div></div>
  
  <!-- Smiling Clouds -->
  <div class="cloud">
    <div class="cloud-face">😊</div>
  </div>
  <div class="cloud">
    <div class="cloud-face">😄</div>
  </div>
  <div class="cloud">
    <div class="cloud-face">🙂</div>
  </div>
  <div class="cloud">
    <div class="cloud-face">😌</div>
  </div>
  
  <!-- Audio Controls -->
  <button class="audio-controls" id="audioToggle" aria-label="Toggle audio">
    <i class="fas fa-music"></i>
  </button>
  
  <!-- Page 1: Song Captcha -->
  <div id="page1" style="min-height:100vh; display:none;">
    <div class="frosted">
      <div class="main-question">Prove you're not a robot 🤖💜</div>
      <div class="dreamy-label">What is our common <span style="font-style:italic;">favourite song</span>?</div>
      <input type="text" id="songInp" placeholder="Type here..." autocomplete="off" aria-label="Enter favorite song"/>
      <br>
      <button onclick="checkSong()">Submit</button>
      <div id="songResult"></div>
    </div>
  </div>
  
  <!-- Page 2: Love Story + Nickname Captcha -->
  <div id="page2" style="display:none; min-height:100vh;">
    <div>
      <div class="love-story">
        <div class="illustration">
          <img src="https://em-content.zobj.net/thumbs/120/apple/354/teddy-bear_1f9f8.png" alt="Teddy bear emoji">
          <img src="https://em-content.zobj.net/thumbs/120/apple/354/tulip_1f337.png" alt="Tulip flower emoji">
        </div>
        <h2>Mohit and Thara 💕</h2>
        If this page has found you, then my 3 to 4 months of daily coding were truly successful. Because this was made just for you, Sachutty!! Do you remember how we were in the same division in fourth and fifth standard, sat together in the same traveller KRK? And how those senior chechis used to tease us by pretending to marry us by plucking leaves through the traveller window and throwing them on our heads like it was some dramatic ceremony!! We both shouted chii and ran away, laughing and hiding in embarrassment. But little did we know, destiny was smiling quietly that day!!<br><br>
        And now here we are in 2025. It has almost been a year since you confessed your love to me!! Since then, everything has changed. You became my constant, my peace, my strongest support!! You stayed with me through every low, held me even when you were tired, and gave me the kind of love that speaks louder in silence than in words!!<br><br>
        You stood by me when no one else did. You tried every day to bring even the smallest smile to my face!! I have seen your efforts, I have felt your love, and I hold it close always. And how can I ever forget 7th of July, the evening you proposed with that shy yet brave heart!! And 13th of July, the moment I accepted your request and gave this love a name!!<br><br>
        That evening on Snapchat, we were playing Truth or Dare, and I made you say the truth in the most indirect way possible. Even then, you smiled with those shy eyes and said everything without fully saying it!! It was awkward, funny, and somehow deeply beautiful. It felt like our beginning!!<br><br>
        Heyy Sachutty, I know things have not been easy for you. But I want you to know this with all my heart!! Your Vaava is always rooting for you. Always cheering for you even when the world gets quiet!!<br><br>
        This page is just one percent of my love. The rest is in every look, every prayer, and every tomorrow where I choose you again and again!!<br><br>
        In every universe, in every lifetime, it's still you.
      </div>
      <div class="nickname-captcha">
        <span>✨ Attractive Captcha: <span style="color:#754b9a;">What does Mohit call Thara?</span> ✨</span>
        <br><br>
        <input type="text" id="nickInp" placeholder="Enter nickname..." autocomplete="off" aria-label="Enter nickname" style="margin-bottom:6px;width:90%;font-size:1em;"/>
        <br>
        <button onclick="checkNickname()" style="font-size:1em;padding:10px 28px;">Unlock Memories</button>
        <div id="nickResult"></div>
      </div>
    </div>
  </div>
  
  <!-- Page 3: Core Memories -->
  <div id="page3" style="display:none; min-height:100vh;">
    <!-- Romantic Captions -->
    <div id="romanticCaption" class="romantic-caption"></div>
    <h1 class="page3-title">Core Memories 💫</h1>
    <div class="memory-grid">
      <img src="assets/mohit_1.png" alt="Mohit and Thara memory 1" class="draggable-image">
      <img src="assets/mohit_2.png" alt="Mohit and Thara memory 2" class="draggable-image">
      <img src="assets/mohit_3.png" alt="Mohit and Thara memory 3" class="draggable-image">
      <img src="assets/mohit_4.png" alt="Mohit and Thara memory 4" class="draggable-image">
      <img src="assets/mohit_5.png" alt="Mohit and Thara memory 5" class="draggable-image">
    </div>
  </div>
  
  <!-- Audio Element -->
  <audio id="backgroundMusic" loop>
    <!-- Fallback audio source -->
    <source src="assets/pulkodiyil_thoomani.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
  </audio>
  
  <script>
    // Wait for everything to load
    window.addEventListener('load', function() {
      // Hide loading screen
      setTimeout(function() {
        document.getElementById('loadingScreen').style.opacity = '0';
        setTimeout(function() {
          document.getElementById('loadingScreen').style.display = 'none';
          document.getElementById('page1').style.display = 'block';
        }, 500);
      }, 1500);
      
      // Initialize audio
      initAudio();
    });
    
    // Romantic captions for Mohit
    const romanticCaptions = [
      "You make my heart skip beats 💕",
      "In your eyes, I found my home 🏠",
      "Every moment with you is magic ✨",
      "You're my favorite hello and hardest goodbye 💫",
      "With you, forever feels like just the beginning 🌟",
      "You are my today and all of my tomorrows 💝"
    ];
    
    let currentCaptionIndex = 0;
    let captionInterval;
    
    // Start romantic captions slideshow
    function startRomanticCaptions() {
      const captionElement = document.getElementById('romanticCaption');
      if (!captionElement) return;
      
      function showNextCaption() {
        captionElement.style.animation = 'slideOutRight 0.5s ease-in forwards';
        
        setTimeout(() => {
          captionElement.textContent = romanticCaptions[currentCaptionIndex];
          captionElement.style.animation = 'slideInRight 1s ease-out forwards';
          currentCaptionIndex = (currentCaptionIndex + 1) % romanticCaptions.length;
        }, 500);
      }
      
      // Show first caption immediately
      captionElement.textContent = romanticCaptions[currentCaptionIndex];
      currentCaptionIndex++;
      
      // Start interval for subsequent captions
      captionInterval = setInterval(showNextCaption, 10000);
    }
    
    // Stop romantic captions
    function stopRomanticCaptions() {
      if (captionInterval) {
        clearInterval(captionInterval);
        captionInterval = null;
      }
    }
    
    // Audio functionality
    function initAudio() {
      const audio = document.getElementById('backgroundMusic');
      const audioToggle = document.getElementById('audioToggle');
      let audioEnabled = false;
      
      // Try to play audio on user interaction
      function enableAudio() {
        if (audioEnabled) return;
        
        audio.play().then(() => {
          audioEnabled = true;
          audioToggle.innerHTML = '<i class="fas fa-volume-up"></i>';
        }).catch(e => {
          console.log('Audio playback failed:', e);
          audioToggle.innerHTML = '<i class="fas fa-volume-mute"></i>';
        });
      }
      
      // Toggle audio on/off
      audioToggle.addEventListener('click', function() {
        if (audio.paused) {
          audio.play();
          audioToggle.innerHTML = '<i class="fas fa-volume-up"></i>';
        } else {
          audio.pause();
          audioToggle.innerHTML = '<i class="fas fa-volume-mute"></i>';
        }
      });
      
      // Enable audio on first user interaction with the page
      document.addEventListener('click', function firstInteraction() {
        enableAudio();
        document.removeEventListener('click', firstInteraction);
      }, { once: true });
    }
    
    // Page Navigation
    function showPage(id) {
      document.getElementById('page1').style.display = 'none';
      document.getElementById('page2').style.display = 'none';
      document.getElementById('page3').style.display = 'none';
      document.getElementById(id).style.display = 'block';
      
      // Stop any existing caption intervals
      stopRomanticCaptions();
      
      // Initialize draggable images and start captions for page 3
      if (id === 'page3') {
        setTimeout(initializeDraggableImages, 100);
        setTimeout(startRomanticCaptions, 1000);
      }
      
      // Try to play audio when changing pages
      const audio = document.getElementById('backgroundMusic');
      if (audio) {
        audio.play().catch(e => console.log('Audio play prevented'));
      }
    }
    
    function checkSong() {
      const val = document.getElementById('songInp').value.trim().toLowerCase();
      const res = document.getElementById('songResult');
      
      // Show loading state
      res.textContent = "Checking...";
      res.className = "";
      
      setTimeout(() => {
        if(val === "kho gaye") {
          res.textContent = "Correct! 💜";
          res.className = "success";
          setTimeout(() => showPage('page2'), 1100);
        } else {
          res.textContent = "Try again! Hint: it's a dreamy song 💔";
          res.className = "error";
          // Shake animation for error
          document.getElementById('songInp').style.animation = 'shake 0.5s';
          setTimeout(() => {
            document.getElementById('songInp').style.animation = '';
          }, 500);
        }
      }, 500);
    }
    
    function checkNickname() {
      const val = document.getElementById('nickInp').value.trim().toLowerCase();
      const res = document.getElementById('nickResult');
      
      // Show loading state
      res.textContent = "Verifying...";
      res.className = "";
      
      setTimeout(() => {
        if(val === "achu") {
          res.textContent = "Perfect! Unlocking memories... 💕";
          res.className = "success";
          setTimeout(() => showPage('page3'), 1200);
        } else {
          res.textContent = "Nope 😔 Try again, cutie!";
          res.className = "error";
          // Pulse animation for error
          document.getElementById('nickInp').style.animation = 'pulse 0.5s';
          setTimeout(() => {
            document.getElementById('nickInp').style.animation = '';
          }, 500);
        }
      }, 500);
    }
    
    // Draggable Images Functionality with improved touch support
    function initializeDraggableImages() {
      const images = document.querySelectorAll('.draggable-image');
      
      images.forEach((img, index) => {
        let isDragging = false;
        let startX, startY, startLeft, startTop;
        
        // Mouse events
        img.addEventListener('mousedown', startDrag);
        document.addEventListener('mousemove', drag);
        document.addEventListener('mouseup', stopDrag);
        
        // Touch events
        img.addEventListener('touchstart', handleTouchStart, { passive: false });
        img.addEventListener('touchmove', handleTouchMove, { passive: false });
        img.addEventListener('touchend', stopDrag);
        
        function startDrag(e) {
          isDragging = true;
          img.classList.add('dragging');
          img.style.cursor = 'grabbing';
          
          const rect = img.getBoundingClientRect();
          startX = e.clientX || e.touches[0].clientX;
          startY = e.clientY || e.touches[0].clientY;
          startLeft = rect.left;
          startTop = rect.top;
          
          e.preventDefault();
        }
        
        function drag(e) {
          if (!isDragging) return;
          
          const clientX = e.clientX || (e.touches && e.touches[0].clientX);
          const clientY = e.clientY || (e.touches && e.touches[0].clientY);
          
          if (!clientX || !clientY) return;
          
          const deltaX = clientX - startX;
          const deltaY = clientY - startY;
          
          img.style.left = (startLeft + deltaX) + 'px';
          img.style.top = (startTop + deltaY) + 'px';
          img.style.transform = 'none';
          
          e.preventDefault();
        }
        
        function stopDrag() {
          if (isDragging) {
            isDragging = false;
            img.classList.remove('dragging');
            img.style.cursor = 'grab';
          }
        }
        
        function handleTouchStart(e) {
          startDrag(e.touches[0]);
        }
        
        function handleTouchMove(e) {
          drag(e.touches[0]);
        }
      });
    }
    
    // Raindrop animation
    function createRaindrop() {
      const drop = document.createElement('div');
      drop.className = 'raindrop';
      drop.style.left = Math.random() * 98 + 'vw';
      drop.style.width = (6 + Math.random()*3) + 'px';
      drop.style.height = (13 + Math.random()*6) + 'px';
      drop.style.opacity = (0.4 + Math.random() * 0.4).toFixed(2);
      drop.style.animationDuration = (5.2 + Math.random()*1.2).toFixed(2) + "s";
      
      // Add slight blue variation to each raindrop
      const blueShades = [
        'linear-gradient(160deg, #4A90E2 20%, #1E3A8A 80%)',
        'linear-gradient(160deg, #5BA3F5 30%, #2563EB 90%)',
        'linear-gradient(160deg, #3B82F6 10%, #1D4ED8 70%)'
      ];
      drop.style.background = blueShades[Math.floor(Math.random() * blueShades.length)];
      
      document.body.appendChild(drop);
      setTimeout(()=>{ drop.remove(); }, 6200);
    }
    
    // Create rain every 800ms (slightly faster than before)
    setInterval(createRaindrop, 800);
    
    // Add shake animation for errors
    const style = document.createElement('style');
    style.textContent = `
      @keyframes shake {
        0%, 100% { transform: translateX(0); }
        20% { transform: translateX(-5px); }
        40% { transform: translateX(5px); }
        60% { transform: translateX(-5px); }
        80% { transform: translateX(5px); }
      }
      
      @keyframes pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale
